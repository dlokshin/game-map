(this["webpackJsonpreact-map-app"]=this["webpackJsonpreact-map-app"]||[]).push([[0],{100:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(44),o=n.n(r),s=(n(78),n(79),n(4)),c=n.n(s),u=n(10),h=n(3),l=n(1),d=n(45),p=n.n(d),m=n(46),f=n.n(m),g=function(){var t=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.d("https://cdn.jsdelivr.net/npm/us-atlas@3/states-albers-10m.json");case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(c.a.mark((function t(e){var n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get(e);case 3:return n=t.sent,a=n.data,t.next=7,new Promise((function(t,e){var n=[];f()().fromString(a).subscribe((function(t){n.push(t)})).on("done",(function(){t(n)}))}));case 7:return i=t.sent,t.abrupt("return",i||[]);case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),y=n(7),b=n(8),w=n(49),x=n(6),E=n(50),k=n(48),j=n(47),O={top:0,right:0,bottom:0,left:0},z=function(){function t(e){var n=this,a=e.data,i=e.parentId,r=e.dimension,o=e.margin,s=void 0===o?O:o;Object(y.a)(this,t),this.timeout=null,this.DEBOUNCE_TIME=500,this.handleOnResize=function(){n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout((function(){n.update(n.data)}),n.DEBOUNCE_TIME)},this.data=a,this.parentId=i,this.margin=s,this.dimension=r,this.parentEl=document.getElementById(i),window.addEventListener("resize",this.handleOnResize)}return Object(b.a)(t,[{key:"update",value:function(t){this.data=t,this.parentEl=this.parentEl||document.getElementById(this.parentId);var e=this.getDimension();this.width=e.width,this.height=e.height,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.svg=this.getSvg(),this.rootGroup=this.getGroup(),this.draw()}},{key:"draw",value:function(){}},{key:"remove",value:function(t){window.removeEventListener("resize",this.handleOnResize),"function"===typeof t&&t()}},{key:"getSvg",value:function(){var t=l.f(this.parentEl).select("svg");return t.empty()&&(t=l.f(this.parentEl).append("svg")),t.attr("width",this.width).attr("height",this.height),t}},{key:"getGroup",value:function(){var t=this.svg.select("g");return t.empty()&&(t=this.svg.append("g")),t.attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")"))}},{key:"getDimension",value:function(){return{width:this.dimension.width||this.parentEl.offsetWidth,height:this.dimension.height||this.parentEl.offsetHeight}}},{key:"createElement",value:function(t,e,n){var a=n.select("".concat(t,".").concat(e));return a.empty()&&(a=n.append(t)),a.attr("class",e)}}]),t}(),G=function(){function t(){Object(y.a)(this,t),this.node=this.getNode()}return Object(b.a)(t,[{key:"renderHTML",value:function(t,e){this.node.style("left",e.x+16+"px").style("top",e.y-16+"px").html(t),this.show()}},{key:"show",value:function(){this.node.style("opacity",1)}},{key:"hide",value:function(){this.node.style("opacity",0)}},{key:"destroy",value:function(){this.node&&this.node.remove()}},{key:"getNode",value:function(){return this.node||(this.node=this.initNode(),document.body.appendChild(this.node)),l.f(this.node)}},{key:"initNode",value:function(){var t=document.querySelector(".chart-tooltip");t||(t=document.createElement("div"));var e=l.f(t);return e.attr("class","chart-tooltip").style("position","fixed").style("display","inline").style("opacity",0).style("z-index",9999).style("pointer-events","none").style("box-sizing","border-box").style("padding","12px 16px").style("border-radius","4px").style("background-color","#ffffff").style("box-shadow","0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)"),e.node()}}]),t}(),N=function(t){Object(E.a)(n,t);var e=Object(k.a)(n);function n(t){var a;return Object(y.a)(this,n),(a=e.call(this,t)).handleClick=function(t){var e=a.path.bounds(t),n=Object(h.a)(e,2),i=Object(h.a)(n[0],2),r=i[0],o=i[1],s=Object(h.a)(n[1],2),c=s[0],u=s[1];l.a.stopPropagation(),a.svg.transition().duration(750).call(a.zoom.transform,l.h.translate(a.width/2,a.height/2).scale(Math.min(8,.9/Math.max((c-r)/a.width,(u-o)/a.height))).translate(-(r+c)/2,-(o+u)/2),l.e(a.svg.node())),a.resizeDots()},a.resizeDots=function(){a.dotGroup.selectAll("circle").attr("r",1)},a.resetDots=function(){a.dotGroup.selectAll("circle").attr("r",6)},a.zoomed=function(){a.rootGroup.attr("transform",l.a.transform),a.rootGroup.attr("stroke-width",1/l.a.transform.k)},a.reset=function(){a.svg.transition().duration(750).call(a.zoom.transform,l.h,l.i(a.svg.node()).invert([a.width/2,a.height/2])),a.resetDots()},a.tooltip=new G,a}return Object(b.a)(n,[{key:"draw",value:function(){Object(w.a)(Object(x.a)(n.prototype),"draw",this).call(this),this.zoom=l.g().scaleExtent([1,8]).on("zoom",this.zoomed),this.svg.attr("viewBox",[0,0,this.width,this.height]).on("click",this.reset),this.path=l.c(),this.geoGroup=this.createElement("g","geo-group",this.rootGroup),this.dotGroup=this.createElement("g","dot-group",this.rootGroup),this.drawGeo(),this.drawDots(),this.svg.call(this.zoom)}},{key:"drawGeo",value:function(){var t=j.a(this.data.geo,this.data.geo.objects.states).features||[],e=this.geoGroup.selectAll("path").data(t),n=e.enter().append("path");e.merge(n).attr("d",this.path).on("click",this.handleClick),e.exit().remove()}},{key:"drawDots",value:function(){var t=this,e=l.b().translate([this.width/2,this.height/2]).scale(1280),n=this.data.games.filter((function(t){return"NULL"!==t.lat||"NULL"!==t.lon})).map((function(t){return{origin:t,coordinates:e([+t.lon,+t.lat])}})).filter((function(t){return null!==t.coordinates})),a=this.dotGroup.selectAll("circle").data(n),i=a.enter().append("circle"),r=a.merge(i);r.attr("transform",(function(t){return"translate(".concat(t.coordinates,")")})).attr("r",0).attr("fill-opacity",1).attr("stroke-opacity",0).transition().delay((function(t,e){return 50*e})).duration(500).attr("r",6).attr("fill-opacity",0).attr("stroke-opacity",1),r.on("mouseover",(function(e){var n="\n                    <div>\n                        <p>\n                            <small>game_id:</small> ".concat(e.origin.game_id,"\n                        </p>\n                        <p>\n                            ").concat(e.origin.home_team," vs ").concat(e.origin.away_team,"\n                        </p>\n                    </div>\n                "),a={x:l.a.clientX,y:l.a.clientY};t.tooltip.renderHTML(n,a)})).on("mouseout",(function(e){t.tooltip.hide()})),a.exit().remove()}}]),n}(z);n(98);var I=function(t){return Object(a.useEffect)((function(){var e=null;e||(e=new N({data:t.data,parentId:t.id,margin:t.margin,dimension:{width:t.width,height:t.height}})),e.update(t.data)})),i.a.createElement("div",{className:"map-chart",id:t.id})};n(99);var L=function(){var t=Object(a.useState)(!1),e=Object(h.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)("https://docs.google.com/spreadsheets/d/e/2PACX-1vRjeukJGxqPfW0mtYudNih4gQH2uQdQCWYNcFfo9Ecvxcl3PYOvGxmSTVzJ6L4hFFnSIfI8XuY51Ygj/pub?gid=1829641480&single=true&output=csv"),s=Object(h.a)(o,2),l=s[0],d=s[1],p=Object(a.useState)([]),m=Object(h.a)(p,2),f=m[0],y=m[1],b=Object(a.useState)({objects:{states:[],countries:[]}}),w=Object(h.a)(b,2),x=w[0],E=w[1];Object(a.useEffect)((function(){g().then((function(t){E(t)}))}),[]);var k=function(){var t=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(!0),t.next=4,v(l);case 4:e=t.sent,y(e),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.prev=10,r(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,8,10,13]])})));return function(){return t.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement("form",{className:"map-form"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"url"},"Add game url:"),i.a.createElement("input",{type:"text",placehoder:"input game url",value:l,onChange:function(t){return d(t.target.value)}})),i.a.createElement("button",{type:"button",onClick:k,disabled:n},n?"Loading...":"Load")),i.a.createElement(I,{id:"map-chart-id",height:610,width:975,margin:{top:0,right:0,bottom:0,left:0},data:{geo:x,games:f}}))};var S=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},73:function(t,e,n){t.exports=n(100)},78:function(t,e,n){},79:function(t,e,n){},98:function(t,e,n){},99:function(t,e,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.fa1634d2.chunk.js.map